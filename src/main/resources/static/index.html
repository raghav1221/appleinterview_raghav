<html>
<head>

<script type="text/javascript">

	function getActualURL(){
		var id  = document.getElementById("actualURL").value;
		document.getElementById("actualURL").value = "";
		
		
	    
	    var jsonObj = '{ "url": "'+id+'"}';
	    alert(jsonObj);
	    URL = "http://localhost:8080/shortenURL/create/";
	    var xmlhttp = new XMLHttpRequest();
	    //xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
	    xmlhttp.onreadystatechange = function()
    	{
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {
        	callbackFunction(xmlhttp.responseText); // Another callback here
        }
    	}; 
	    xmlhttp.open("POST", URL, false);
	    xmlhttp.setRequestHeader("Content-Type", "application/json");
	    xmlhttp.send(jsonObj);
	}
	
	function callbackFunction(xmlhttp){
		var jsonObj = JSON.parse(xmlhttp);
		//document.getElementById("shortURL").value = jsonObj["shortLink"]; 
		var actualurl = document.getElementById("actualURLVal");
		actualurl.href = jsonObj["originalUrl"];
		document.getElementById("shorturlval").innerHTML = jsonObj["shortLink"];
		
	}
</script>

</head>
<body>

<h2>URL Shortening</h2>
<table>
	<tr>
		<th>Enter the URL</th>
		<td><input type = "text" name ="actualURL" id ="actualURL" value = ""></td>
	</tr>
	<tr>
		<th>Generated URL</th>
		<td><a href="#" id="actualURLVal" ><span id="shorturlval"></td>
	</tr>
	<tr>
		<th></th>
		<td><button name ="submit" id ="submit" onclick="getActualURL()">submit</button></td>
	</tr>
	
</table>



<table>

</table>


</body>


</html>